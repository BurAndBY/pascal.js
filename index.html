<html>
<head>
  <title>pascal.js</title>
</head>
<body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ace/1.14.0/ace.js" integrity="sha512-WYlXqL7GPpZL2ImDErTX0RMKy5hR17vGW5yY04p9Z+YhYFJcUUFRT31N29euNB4sLNNf/s0XQXZfzg3uKSoOdA==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<script>
    var editor = ace.edit("editor");
    editor.setTheme("ace/theme/monokai");
    editor.session.setMode("ace/mode/pascal");
</script>
<h2>pascal.js - Pascal Compiler in JavaScript</h2>
<p>
  Pascal.js is a Pascal compiler (Turbo Pascal 1.0-ish) implemented in
  JavaScript that outputs <a href="http://llvm.org">LLVM</a> IR. From
  the command line (using Node.js), LLVM is used as a backend to
  generate native code. This online version uses <a href="http://github.com/azakai/llvm.js">LLVM.js</a>
  to compile the LLVM IR to JavaScript. 
</p>
<p>
  <code><b><a href="https://github.com/kanaka/pascal.js">github.com/kanaka/pascal.js</a></b></code>
</p>
<hr>
Pascal Source: <select id="source_file"></select><br>
<textarea id="the_source" cols=90 rows=13 style="background-color: #eeeeff; border: 1px solid black; margin-top: 0.3em; margin-bottom: 0.3em">
</textarea>
<div id="editor">begin
writeln('ok');
end.</div>
<br>
<input value="Parse" type="button"
       onclick="doParse(editor.getValue();, 'the_ast');">
<br>
Abstract Syntax Tree:<br>
<textarea id="the_ast" cols=90 rows=5 style="border: 1px solid black; margin-bottom: 0.6em">
</textarea>
<br>
<input value="Compile to IR" type="button"
       onclick="doIR('the_ast', 'the_ir');">
<br>
LLVM IR:<br>
<textarea id="the_ir" cols=90 rows=5 style="border: 1px solid black; margin-bottom: 0.6em">
</textarea>

<br>
<input value="Compile IR to JS (emscripten)" type="button"
       onclick="doCompile('the_ir', 'the_js');">
<br>
Compiled JavaScript:<br>
<textarea id="the_js" cols=90 rows=5 style="border: 1px solid black; margin-bottom: 0.6em">
</textarea>
<br>
<input value="Execute/evaluate JS" type="button"
       onclick="doExecute('the_js', 'the_output')">
<br>
Execution Output:<br>
<textarea id="the_output" cols=90 rows=5 style="border: 1px solid black; margin-bottom: 0.6em">
</textarea>
<br>

<script src="https://kanaka.github.io/pascal.js/parse.js"></script>
<script src="https://kanaka.github.io/pascal.js/ieee754.js"></script>
<script src="https://kanaka.github.io/pascal.js/ir.js"></script>
<script src="pascal_demo.js"></script>
<script>
  XHR_PREFIX = "llvm.js/";
</script>
<script src="llvm.js/compiler.js"></script>
<script>
  XHR_PREFIX = "";
</script>
</body>
</html>

